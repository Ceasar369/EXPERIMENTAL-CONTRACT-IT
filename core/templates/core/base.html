{% load i18n %}
<!-- core/templates/core/base -->
<!-- base.html : utilis√© pour les pages marketing (landing, pr√©sentation, etc.) -->

{% load i18n %}
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="https://cdn.tailwindcss.com"></script>

        <title>{% block title %}{% endblock %} | Contract_it</title>
    </head>

    <body>
        <nav class="py-6 px-6 flex justify-between items-center border-b border-gray-200">
            <!-- Logo √† gauche -->
            <a href="/" class="text-xl font-semibold">Contract_it</a>

            <!-- Liens + s√©lecteur √† droite -->
            <div class="space-x-6 flex items-center">
                <a href="#" class="text-lg font-semibold hover:text-gray-500">{% trans "New item" %}</a>
                <a href="#" class="text-lg font-semibold hover:text-gray-500">{% trans "Browse" %}</a>

                <a href="{% url 'signup' %}" class="px-6 py-3 text-lg font-semibold bg-teal-500 text-white rounded-xl hover:bg-teal-700">{% trans "Sign up" %}</a>
                <a href="{% url 'login' %}" class="px-6 py-3 text-lg font-semibold bg-gray-500 text-white rounded-xl hover:bg-gray-700">{% trans "Log in" %}</a>

                <!-- üî§ S√©lecteur de langue √† droite -->
                <div class="flex space-x-2 items-center">
                    <form id="lang-fr" action="{% url 'set_language' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="fr">
                        <input type="hidden" name="next" id="next-fr">
                        <button type="submit" class="text-sm font-medium border px-3 py-1 rounded hover:bg-gray-100 {% if LANGUAGE_CODE == 'fr' %}bg-gray-300{% endif %}">
                            Fran√ßais
                        </button>
                    </form>

                    <form id="lang-en" action="{% url 'set_language' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="en">
                        <input type="hidden" name="next" id="next-en">
                        <button type="submit" class="text-sm font-medium border px-3 py-1 rounded hover:bg-gray-100 {% if LANGUAGE_CODE == 'en' %}bg-gray-300{% endif %}">
                            English
                        </button>
                    </form>
                </div>

                <script>
                    // Fonction pour construire l'URL √©quivalente dans l'autre langue
                    const currentPath = window.location.pathname;

                    const getLangPrefix = (path) => {
                        if (path.startsWith("/fr/")) return "fr";
                        if (path.startsWith("/en/")) return "en";
                        return "";  // aucune langue, par d√©faut
                    };

                    const stripLangPrefix = (path) => {
                        return path.replace(/^\/(fr|en)(\/|$)/, "/");
                    };

                    const newPath = stripLangPrefix(currentPath);
                    document.getElementById("next-fr").value = "/fr" + newPath;
                    document.getElementById("next-en").value = "/en" + newPath;
                </script>

            </div>
        </nav>


          
        <div class="px-6 py-6">
            {% block content %}
            {% endblock %}
        </div>
    </body>

    {% include "core/partials/footer.html" %}
</html>
