{% extends "core/base2.html" %}
{% load i18n %}
{% load static %}
{# core/templates/core/create_project.html #}

{% block title %}{% trans "Publish a Project" %}{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto bg-white p-8 shadow-md rounded-md">
    <h2 class="text-2xl font-bold mb-6 text-center">{% trans "Publish a New Project" %}</h2>

    <!-- 🧾 Formulaire de création de projet -->
    <form id="project-form">
        <!-- 📌 Titre -->
        <label for="title" class="block mb-2 font-medium">{% trans "Project title" %}</label>
        <input type="text" id="title" name="title" required class="w-full p-3 border rounded mb-4">

        <!-- 📄 Description -->
        <label for="description" class="block mb-2 font-medium">{% trans "Description" %}</label>
        <textarea id="description" name="description" required class="w-full p-3 border rounded mb-4"></textarea>

        <!-- 💰 Budget -->
        <label for="budget" class="block mb-2 font-medium">{% trans "Budget (CAD)" %}</label>
        <input type="number" id="budget" name="budget" required class="w-full p-3 border rounded mb-4">

        <!-- 📆 Échéance -->
        <label for="deadline" class="block mb-2 font-medium">{% trans "Deadline" %}</label>
        <input type="date" id="deadline" name="deadline" required class="w-full p-3 border rounded mb-4">

        <!-- 📍 Localisation -->
        <label for="location" class="block mb-2 font-medium">{% trans "Location" %}</label>
        <input type="text" id="location" name="location" required class="w-full p-3 border rounded mb-4">

        <!-- 🏗️ Catégorie du projet (menu déroulant) -->
        <label for="category" class="block mb-2 font-medium">{% trans "Project category" %}</label>
        <select id="category" name="category" required class="w-full p-3 border rounded mb-4">
            <option value="">{% trans "Select a category" %}</option>
            <option value="plumbing">{% trans "Plumbing" %}</option>
            <option value="roofing">{% trans "Roofing" %}</option>
            <option value="painting">{% trans "Painting" %}</option>
            <option value="flooring">{% trans "Flooring" %}</option>
            <option value="electrical">{% trans "Electrical work" %}</option>
            <option value="kitchen">{% trans "Kitchen renovation" %}</option>
            <option value="bathroom">{% trans "Bathroom renovation" %}</option>
        </select>

        <!-- 🤖 Champ IA caché -->
        <input type="hidden" id="ai_drafted" name="ai_drafted" value="false">

        <!-- 🚀 Bouton de soumission -->
        <button type="submit" class="w-full bg-teal-600 text-white p-3 rounded hover:bg-teal-700">
            {% trans "Submit Project" %}
        </button>
    </form>

    <!-- ✅ Message de succès -->
    <div class="text-green-600 text-center mt-4 hidden" id="success-message">
        {% trans "Your project has been published successfully!" %}
    </div>

    <!-- ❌ Message d’erreur -->
    <div class="text-red-600 text-center mt-4 hidden" id="error-message"></div>
</div>

<!-- 📦 Inclusion des scripts JavaScript -->
<script src="{% static 'core/js/secureFetch.js' %}"></script>
<script src="{% static 'core/js/submit_project.js' %}"></script>
{% endblock %}
