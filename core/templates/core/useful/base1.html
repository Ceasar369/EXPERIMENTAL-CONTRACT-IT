{% load i18n %}
{% comment %} {# üìÅ Fichier : core/templates/core/useful/base1.html
   üß± CE FICHIER EST UN TEMPLATE DE BASE POUR TOUTES LES PAGES PUBLIQUES

   üìå UTILISATION :
   - Ce fichier HTML sert de "layout g√©n√©ral" (structure de base) pour les pages publiques du site CONTRACT-IT.
   - Il est utilis√© via l'instruction `{% extends "core/useful/base1.html" %}` dans d'autres fichiers HTML.
   - Il d√©finit la structure commune :
     - ent√™te (nav)
     - bloc de contenu 
     - pied de page 

   üìå EMPLACEMENT :
   - Ce fichier est plac√© dans le dossier : `core/templates/core/useful/`
   - Il est s√©par√© des templates finaux (index, contact‚Ä¶) pour pouvoir √™tre r√©utilis√© facilement.

   üìå CONTENU PRINCIPAL :
   - Logo √† gauche (cliquable vers la page d‚Äôaccueil)
   - Boutons Login et Register au centre
   - S√©lecteur de langue (Fran√ßais / English) √† droite
   - Syst√®me TailwindCSS pour design rapide et responsive
#} {% endcomment %}

<!doctype html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <!-- üß† Encodage et responsive pour tous les appareils -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- üé® Inclusion de TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- üßæ Titre de l‚Äôonglet du navigateur -->
    <title>{% block title %}{% endblock %} | CONTRACT-IT</title>
</head>

<body>
    <!-- üîù ENT√äTE PRINCIPAL (navbar du haut) -->
    <nav class="py-6 px-6 flex justify-between items-center border-b border-gray-200 bg-white shadow-sm">
        <!-- ‚¨ÖÔ∏è Logo Contract_it √† gauche ‚Äî renvoie vers la page d'accueil -->
        <a href="{% url 'index_view' %}"
           class="text-xl font-bold text-gray-900 hover:text-gray-700 transition">
            Contract_it
        </a>

        <!-- üü© Boutons au centre :  register & Log in -->
        <div class="flex items-center space-x-6">
            <!-- ‚úÖ Bouton pour aller √† la page d'inscription -->
            <a href="{% url 'register_view' %}"
               class="px-5 py-2 rounded bg-teal-500 text-white text-sm font-semibold hover:bg-teal-600 transition">
                {% trans "Register" %}
            </a>

            <!-- ‚úÖ Bouton pour aller √† la page de connexion -->
            <a href="{% url 'login_view' %}"
               class="px-5 py-2 rounded bg-gray-500 text-white text-sm font-semibold hover:bg-gray-700 transition">
                {% trans "Log in" %}
            </a>
        </div>

        <!-- üåê S√©lecteur de langue √† droite (Fr / En) -->
        <div class="flex items-center space-x-3">
            <!-- üîÅ Formulaire pour changer en Fran√ßais -->
            <form id="lang-fr" action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="language" value="fr">
                <input type="hidden" name="next" id="next-fr">
                <button type="submit"
                        class="px-3 py-1 text-sm font-medium border rounded
                               hover:bg-gray-100 transition
                               {% if LANGUAGE_CODE == 'fr' %}bg-gray-300{% endif %}">
                    Fran√ßais
                </button>
            </form>

            <!-- üîÅ Formulaire pour changer en English -->
            <form id="lang-en" action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="language" value="en">
                <input type="hidden" name="next" id="next-en">
                <button type="submit"
                        class="px-3 py-1 text-sm font-medium border rounded
                               hover:bg-gray-100 transition
                               {% if LANGUAGE_CODE == 'en' %}bg-gray-300{% endif %}">
                    English
                </button>
            </form>
        </div>
    </nav>

    <!-- üß† Script JavaScript : permet de rediriger vers la bonne page apr√®s changement de langue -->
    <script>
        // R√©cup√®re l'URL actuelle
        const currentPath = window.location.pathname;

        // Supprime le pr√©fixe de langue (fr/en) s‚Äôil existe
        const stripLangPrefix = (path) => path.replace(/^\/(fr|en)(\/|$)/, "/");

        // Assigne l‚ÄôURL corrig√©e √† chaque bouton
        document.getElementById("next-fr").value = "/fr" + stripLangPrefix(currentPath);
        document.getElementById("next-en").value = "/en" + stripLangPrefix(currentPath);
    </script>

    <!-- üì¶ Bloc de contenu dynamique : sera remplac√© par chaque page qui h√©rite de ce layout -->
    <main class="px-6 py-10">
        {% block content %}
        {% endblock %}
    </main>

    <!-- üìé Footer partag√© (m√™me que les pages publiques) -->
    {% include "core/useful/footer.html" %}
</body>
</html>
