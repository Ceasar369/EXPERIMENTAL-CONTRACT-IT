{% load i18n %}
{% comment %} {# üìÅ Fichier : core/templates/core/useful/base2.html
   üß± CE FICHIER EST UNE BASE MINIMALE POUR LES PAGES DE CONNEXION ET D‚ÄôINSCRIPTION

   üìå UTILISATION :
   - Utilis√© pour les pages : login, register, mot de passe oubli√©‚Ä¶
   - Il contient uniquement :
       - le logo de la plateforme (cliquable vers `/`)
       - un s√©lecteur de langue (Fr / En)
   - Il n‚Äôaffiche PAS les boutons Login ou Sign up, car ils seraient redondants ici.

   üìå STRUCTURE :
   - Ce fichier est appel√© par  `{% extends "core/useful/base2.html" %}` dans les templates login/register
   - Il inclut un `block content` central o√π le formulaire s‚Äôins√®re
   - Le footer global est inclus √©galement √† la fin

   üìå STYLE :
   - Design simple et √©pur√© avec TailwindCSS
   - Parfait pour les formulaires sans distraction
#} {% endcomment %}

<!doctype html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <!-- üß† Configuration de base : encodage, responsive -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- üé® Int√©gration de TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- üè∑Ô∏è Titre de l‚Äôonglet -->
    <title>{% block title %}{% endblock %} | CONTRACT-IT</title>
</head>

<body>
    <!-- üîù EN-T√äTE MINIMALISTE POUR FORMULAIRES -->
    <nav class="py-6 px-6 flex justify-between items-center border-b border-gray-200 bg-white shadow-sm">
        <!-- ‚¨ÖÔ∏è Logo Contract_it ‚Üí clique = retour accueil -->
        <a href="{% url 'index_view' %}"
           class="text-xl font-bold text-gray-900 hover:text-gray-700 transition">
            Contract_it
        </a>

        <!-- üåê S√©lecteur de langue √† droite -->
        <div class="flex items-center space-x-3">
            <!-- üá´üá∑ Fran√ßais -->
            <form id="lang-fr" action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="language" value="fr">
                <input type="hidden" name="next" id="next-fr">
                <button type="submit"
                        class="px-3 py-1 text-sm font-medium border rounded
                               hover:bg-gray-100 transition
                               {% if LANGUAGE_CODE == 'fr' %}bg-gray-300{% endif %}">
                    Fran√ßais
                </button>
            </form>

            <!-- üá¨üáß English -->
            <form id="lang-en" action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="language" value="en">
                <input type="hidden" name="next" id="next-en">
                <button type="submit"
                        class="px-3 py-1 text-sm font-medium border rounded
                               hover:bg-gray-100 transition
                               {% if LANGUAGE_CODE == 'en' %}bg-gray-300{% endif %}">
                    English
                </button>
            </form>
        </div>
    </nav>

    <!-- üåç Script JS pour conserver la page actuelle apr√®s changement de langue -->
    <script>
        const currentPath = window.location.pathname;
        const stripLangPrefix = (path) => path.replace(/^\/(fr|en)(\/|$)/, "/");
        document.getElementById("next-fr").value = "/fr" + stripLangPrefix(currentPath);
        document.getElementById("next-en").value = "/en" + stripLangPrefix(currentPath);
    </script>

    <!-- üì¶ Bloc principal o√π chaque page ins√®re son contenu -->
    <main class="px-6 py-10">
        {% block content %}
        {% endblock %}
    </main>

    <!-- üìé Footer partag√© (m√™me que les pages publiques) -->
    {% include "core/useful/footer.html" %}
</body>
</html>
