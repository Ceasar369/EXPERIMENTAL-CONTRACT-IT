{% extends "core/useful/base2.html" %}
{% load i18n %}
{% load static %}
{% comment %} {# üìÅ Fichier : accounts/templates/accounts/client_dashboard.html
   üß≠ Cette page HTML repr√©sente le tableau de bord d‚Äôun utilisateur de type CLIENT.
   Elle est divis√©e en deux grandes zones :
   - Une colonne lat√©rale gauche (navigation)
   - Un contenu principal √† droite (r√©sum√© et actions personnalis√©es)
   Elle utilise les blocs et styles modernes, est multilingue, et pr√™te √† √™tre connect√©e √† la base de donn√©es.
#} {% endcomment %}

{% block title %}{% trans "Client Dashboard" %}{% endblock %}

{% block content %}
<!-- üåê Conteneur principal avec flex pour disposer la sidebar et le contenu c√¥te √† c√¥te -->
<div class="flex min-h-screen bg-gray-100">

    <!-- üîµ SIDEBAR GAUCHE (Navigation principale du dashboard) -->
    <aside class="w-64 bg-gray-800 text-white flex flex-col justify-between">
        
        <!-- üü¶ Zone sup√©rieure du menu -->
        <div>
            <!-- üß© Logo principal de la plateforme -->
            <div class="px-6 py-5 text-center border-b border-gray-700">
                <h1 class="text-xl font-bold tracking-wide uppercase text-white">CONTRACT-IT</h1>
            </div>

            <!-- üß≠ Menu de navigation lat√©ral, divis√© en groupes logiques -->
            <nav class="mt-6 px-4 space-y-4 text-sm">
                
                <!-- 1Ô∏è‚É£ Groupe : Acc√®s rapide -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mb-1">{% trans "Quick Access" %}</p>
                    <a href="#" class="block py-2 px-3 bg-gray-700 rounded">{% trans "Dashboard" %}</a>
                </div>

                <!-- 2Ô∏è‚É£ Groupe : Activit√©s principales du client -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mt-6 mb-1">{% trans "Activity" %}</p>

                    <!-- üîó Redirige vers la vue my_projects_view (my_projects.html) -->
                    <a href="{% url 'my_projects' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">
                        {% trans "My Projects" %}
                    </a>

                    <!-- üî® Bouton de cr√©ation de projet -->
                    <a href="{% url 'create-project' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">
                        {% trans "Post a New Project" %}
                    </a>

                    <!-- üîß √Ä relier plus tard -->
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Notifications" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Messages" %}</a>
                </div>


                <!-- 3Ô∏è‚É£ Groupe : Compte utilisateur -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mt-6 mb-1">{% trans "Account" %}</p>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "My Profile" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "My Card / Payment" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Settings" %}</a>
                </div>

                <!-- 4Ô∏è‚É£ Groupe : Aide et d√©connexion -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mt-6 mb-1">{% trans "Support" %}</p>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Help" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Contact Us" %}</a>
                    <a href="{% url 'logout' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Logout" %}</a>
                </div>
            </nav>
        </div>

        <!-- üåê S√©lecteur de langue en bas du menu -->
        <div class="px-6 py-4 border-t border-gray-700 text-sm flex justify-between">
            <a href="/en/" class="hover:underline text-white">{% trans "English" %}</a>
            <a href="/fr/" class="hover:underline text-white">{% trans "Fran√ßais" %}</a>
        </div>
    </aside>

    <!-- üßæ CONTENU PRINCIPAL √Ä DROITE -->
    <main class="flex-1 p-8">
        
        <!-- üß≠ En-t√™te personnalis√© du dashboard -->
        <div class="flex justify-between items-center mb-8">
            <div>
                <h2 class="text-2xl font-bold">
                    {% trans "Welcome to your dashboard" %}, {{ user.first_name }} {{ user.last_name }} üëã
                </h2>
                <p class="text-gray-600 mt-1">{% trans "We're glad to see you. Here's a summary of your activity." %}</p>
            </div>

            <!-- üë§ Affichage de la photo de profil √† droite -->
            <div class="text-right">
                <a href="#" class="inline-block">
                    <img src="{{ user.profile_picture.url }}" alt="{% trans 'Profile picture' %}"
                         class="w-12 h-12 rounded-full shadow">
                    <p class="mt-1 text-sm font-medium text-gray-800">
                        {{ user.first_name }} {{ user.last_name }}
                    </p>
                </a>

                
                <!-- üîÅ Bouton de bascule entre r√¥les (visible seulement si utilisateur hybride) -->
                {% if user.is_client and user.is_contractor %}
                    <a href="{% url 'contractor-dashboard' %}" class="inline-block mt-2 ml-2 px-4 py-2 bg-indigo-500 text-white text-sm rounded hover:bg-indigo-600 transition">
                        {% trans "Switch to Contractor mode" %}
                    </a>
                {% endif %}
            </div>
        </div>

        <!-- üìã BLOC 1 : Projets r√©cents du client -->
        <section class="mb-10">
            <h3 class="text-xl font-semibold mb-4">{% trans "Recent Projects" %}</h3>
            {% for project in recent_projects %}
                <div class="border rounded p-4 shadow mb-4">
                    <h4 class="font-bold text-gray-800">{{ project.title }}</h4>
                    <p class="text-sm text-gray-600">{{ project.status }} ‚Äî {{ project.deadline }}</p>

                    <!-- üîó Lien vers les bids re√ßus -->
                    <a href="{% url 'view-project-bids' project.id %}" 
                    class="text-sm text-teal-600 hover:underline mt-2 inline-block">
                        {% trans "View Proposals" %}
                    </a>
                </div>
            {% endfor %}
        </section>

        <!-- üí∞ BLOC 2 : Paiements r√©cents -->
        <section class="mb-10">
            <h3 class="text-xl font-semibold mb-4">{% trans "Latest Payments" %}</h3>
            <!-- üîΩ IMPORTANT : Ceci est une section √† remplir dynamiquement.
                 √Ä terme, tu devras afficher ici les paiements associ√©s aux jalons valid√©s par le client.
                 Pour chaque paiement :
                 - Projet concern√©
                 - Montant pay√©
                 - Date de paiement
                 - Nom de l‚Äôentrepreneur -->
        </section>

        <!-- ‚≠ê BLOC 3 : √âvaluations √† laisser -->
        <section class="mb-10">
            <h3 class="text-xl font-semibold mb-4">{% trans "Pending Reviews" %}</h3>
            <!-- üîΩ IMPORTANT : Ceci est une section temporairement vide.
                 Plus tard, tu afficheras ici tous les projets termin√©s pour lesquels le client
                 n‚Äôa pas encore laiss√© d‚Äô√©valuation.
                 Tu peux y ins√©rer un bouton "Leave a review" qui redirige vers une page d‚Äô√©valuation. -->
        </section>

        <!-- üí¨ BLOC 4 : Derniers messages re√ßus -->
        <section>
            <h3 class="text-xl font-semibold mb-4">{% trans "Recent Messages" %}</h3>
            <!-- üîΩ IMPORTANT : Ceci est un placeholder.
                 Tu devras afficher ici les derni√®res conversations entre le client et les entrepreneurs,
                 tri√©es par date de dernier message.
                 Affiche le nom de l‚Äôentrepreneur, l‚Äôaper√ßu du message, et un lien "Open Chat". -->
        </section>
    </main>
</div>
{% endblock %}
