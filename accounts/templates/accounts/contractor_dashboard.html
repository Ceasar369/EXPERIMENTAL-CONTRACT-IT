{% extends "core/useful/base2.html" %}
{% load i18n %}
{% load static %}
{% comment %} {# üìÅ Fichier : accounts/templates/accounts/contractor_dashboard.html
   üõ†Ô∏è Ce fichier HTML repr√©sente le tableau de bord d‚Äôun utilisateur de type ENTREPRENEUR.
   Il suit la m√™me structure que le dashboard client :
   - Une sidebar de navigation √† gauche
   - Un contenu principal √† droite
   Il est 100 % compatible avec les traductions et pr√™t pour la future int√©gration dynamique.
#} {% endcomment %}

{% block title %}{% trans "Contractor Dashboard" %}{% endblock %}

{% block content %}
<!-- üß± Conteneur principal avec disposition en deux colonnes -->
<div class="flex min-h-screen bg-gray-100">

    <!-- üîµ SIDEBAR √Ä GAUCHE -->
    <aside class="w-64 bg-gray-800 text-white flex flex-col justify-between">
        <!-- üîπ Logo + Navigation -->
        <div>
            <!-- üìõ Logo -->
            <div class="px-6 py-5 text-center border-b border-gray-700">
                <h1 class="text-xl font-bold tracking-wide uppercase text-white">CONTRACT-IT</h1>
            </div>

            <!-- üß≠ Menu lat√©ral -->
            <nav class="mt-6 px-4 space-y-4 text-sm">
                
                <!-- 1Ô∏è‚É£ Acc√®s rapide -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mb-1">{% trans "Quick Access" %}</p>
                    <a href="#" class="block py-2 px-3 bg-gray-700 rounded">{% trans "Dashboard" %}</a>
                </div>

                <!-- 2Ô∏è‚É£ Activit√©s professionnelles -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mt-6 mb-1">{% trans "Activity" %}</p>

                    <!-- üîó Projets publics disponibles pour postuler -->
                    <a href="{% url 'find_jobs' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">
                        {% trans "Available Projects" %}
                    </a>

                    <!-- üß∞ Projets attribu√©s √† cet entrepreneur -->
                    <a href="{% url 'awarded_projects' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">
                        {% trans "My Missions" %}
                    </a>

                    <!-- üìù Toutes les offres d√©j√† soumises -->
                    <a href="{% url 'my-bids' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">
                        {% trans "My Bids" %}
                    </a>

                    <!-- üìÑ Gestion des documents contractuels ou factures -->
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">
                        {% trans "Documents" %}
                    </a>
                </div>


                <!-- 3Ô∏è‚É£ Profil et compte -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mt-6 mb-1">{% trans "Account" %}</p>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "My Profile" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "My Card / Payment" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Settings" %}</a>
                </div>

                <!-- 4Ô∏è‚É£ Support et sortie -->
                <div>
                    <p class="uppercase text-gray-400 text-xs mt-6 mb-1">{% trans "Support" %}</p>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Help" %}</a>
                    <a href="#" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Contact Us" %}</a>
                    <a href="{% url 'logout' %}" class="block py-2 px-3 hover:bg-gray-700 rounded">{% trans "Logout" %}</a>
                </div>
            </nav>
        </div>

        <!-- üåê S√©lecteur de langue -->
        <div class="px-6 py-4 border-t border-gray-700 text-sm flex justify-between">
            <a href="/en/" class="hover:underline text-white">{% trans "English" %}</a>
            <a href="/fr/" class="hover:underline text-white">{% trans "Fran√ßais" %}</a>
        </div>
    </aside>

    <!-- üßæ CONTENU PRINCIPAL √Ä DROITE -->
    <main class="flex-1 p-8">
        
        <!-- üéâ En-t√™te de bienvenue -->
        <div class="flex justify-between items-center mb-8">
            <div>
                <h2 class="text-2xl font-bold">
                    {% trans "Welcome to your contractor dashboard" %}, {{ user.first_name }} {{ user.last_name }} üë∑
                </h2>
                <p class="text-gray-600 mt-1">{% trans "Manage your projects, missions and payments in one place." %}</p>
            </div>

            <!-- üë§ Photo de profil √† droite -->
            <div class="text-right">
                <a href="#" class="inline-block">
                    <img src="{{ user.profile_picture.url }}" alt="{% trans 'Profile picture' %}"
                         class="w-12 h-12 rounded-full shadow">
                    <p class="mt-1 text-sm font-medium text-gray-800">
                        {{ user.first_name }} {{ user.last_name }}
                    </p>
                </a>

                <!-- üîÅ Bouton de bascule entre r√¥les (visible seulement si utilisateur hybride) -->
                {% if user.is_client and user.is_contractor %}
                    <a href="{% url 'client-dashboard' %}" class="inline-block mt-2 ml-2 px-4 py-2 bg-teal-500 text-white text-sm rounded hover:bg-teal-600 transition">
                        {% trans "Switch to Client mode" %}
                    </a>
                {% endif %}
            </div>
        </div>

        <!-- üì¶ Bloc 1 : Projets disponibles -->
        <section class="mb-10">
            <h3 class="text-xl font-semibold mb-4">{% trans "Available Projects" %}</h3>
            <!-- üîΩ SECTION √Ä REMPLIR DYNAMIQUEMENT PLUS TARD
                 ‚û§ Tu devras afficher ici tous les projets ouverts √† la soumission,
                 filtr√©s par les sp√©cialit√©s de l‚Äôentrepreneur.
                 ‚û§ Pour chaque projet, tu pourras afficher :
                   - Le titre
                   - Le budget estim√©
                   - La date limite
                   - Un bouton "Submit a bid"
            -->
        </section>

        <!-- üõ† Bloc 2 : Missions en cours -->
        <section class="mb-10">
            <h3 class="text-xl font-semibold mb-4">{% trans "My Active Missions" %}</h3>
            <!-- üîΩ SECTION √Ä DYNAMISER PLUS TARD
                 ‚û§ Tu afficheras ici les projets attribu√©s √† l‚Äôentrepreneur.
                 ‚û§ Pour chaque mission :
                   - Nom du client
                   - √âch√©ancier
                   - Statut des jalons
                   - Bouton "Upload document" ou "Mark as completed"
            -->
        </section>

        <!-- üìÅ Bloc 3 : Documents -->
        <section class="mb-10">
            <h3 class="text-xl font-semibold mb-4">{% trans "Project Documents" %}</h3>
            <!-- üîΩ BLOC DOCUMENTAIRE
                 ‚û§ Liste des documents li√©s aux missions (plans, contrats, photos)
                 ‚û§ Option de t√©l√©versement / t√©l√©chargement
            -->
        </section>

        <!-- üí∞ Bloc 4 : Paiements -->
        <section>
            <h3 class="text-xl font-semibold mb-4">{% trans "Recent Payments" %}</h3>
            <!-- üîΩ √Ä COMPL√âTER LORS DE L‚ÄôINT√âGRATION AVEC STRIPE / BASE DE DONN√âES
                 ‚û§ Liste des paiements re√ßus
                 ‚û§ Projets associ√©s, dates et montants
                 ‚û§ Filtrable par date ou statut (pay√© / en attente)
            -->
        </section>
    </main>
</div>
{% endblock %}
