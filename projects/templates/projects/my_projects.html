{% extends "core/useful/base2.html" %}
{% load i18n %}

{% comment %} {# ---------------------------------------------------------------------
  ðŸ“„ Fichier : my_projects.html
  ðŸ“‚ Emplacement : projects/templates/projects/my_projects.html

  ðŸŽ¯ Affiche la liste complÃ¨te des projets crÃ©Ã©s par un client.
      Pour chaque projet :
        - titre, budget, statut, deadline
        - nombre de soumissions reÃ§ues
        - bouton vers la page de dÃ©tail
        - bouton vers la page de modification (Ã  venir)

  ðŸ“Œ Ce fichier est utilisÃ© dans la vue `my_projects_view()` cÃ´tÃ© client.
--------------------------------------------------------------------- #} {% endcomment %}

{% block title %}{% trans "My Projects" %}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto bg-white p-8 shadow-md rounded-md">

    <!-- ðŸ§­ Titre de la page -->
    <h2 class="text-2xl font-bold mb-6 text-center">{% trans "Your Posted Projects" %}</h2>

    {% if projects_with_bids|length == 0 %}
        <p class="text-center text-gray-500">{% trans "You haven't posted any projects yet." %}</p>

        <a href="{% url 'create-project' %}" class="inline-block px-5 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition">
            {% trans "Post your first project" %}
        </a>

    {% else %}
        <!-- âœ… Affichage tableau de tous les projets -->
        <table class="w-full table-auto border-collapse">
            <thead class="bg-gray-100 text-left text-sm uppercase tracking-wide">
                <tr>
                    <th class="px-4 py-3">{% trans "Title" %}</th>
                    <th class="px-4 py-3">{% trans "Status" %}</th>
                    <th class="px-4 py-3">{% trans "Budget" %}</th>
                    <th class="px-4 py-3">{% trans "Deadline" %}</th>
                    <th class="px-4 py-3">{% trans "Bids" %}</th>
                    <th class="px-4 py-3 text-center">{% trans "Actions" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in projects_with_bids %}
                    {% with project=entry.project bids_count=entry.bids_count %}
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-3 font-medium text-green-800">{{ project.title }}</td>
                        <td class="px-4 py-3 text-gray-600">{{ project.get_status_display }}</td>
                        <td class="px-4 py-3 text-gray-600">{{ project.budget }}</td>
                        <td class="px-4 py-3 text-gray-600">{{ project.deadline }}</td>
                        <td class="px-4 py-3 text-center text-gray-800 font-semibold">{{ bids_count }}</td>
                        <td class="text-center whitespace-nowrap">
                        <div class="flex items-center justify-center space-x-4">
                            <a href="{% url 'project-details' project.id %}" class="text-green-600 hover:underline">
                                {% trans "View Details" %}
                            </a>
                            <span class="text-gray-400">|</span>
                            <a href="{% url 'edit-project' project.id %}" class="text-yellow-600 hover:underline">
                                {% trans "Edit" %}
                            </a>
                            <span class="text-gray-400">|</span>
                            <a href="{% url 'view-project-bids' project.id %}" class="text-blue-600 hover:underline">
                                {% trans "View Proposals" %}
                            </a>
                        </div>
                    </td>

                    </tr>
                    {% endwith %}
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</div>
{% endblock %}
