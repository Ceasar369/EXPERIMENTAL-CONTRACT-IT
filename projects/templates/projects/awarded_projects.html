{% extends "core/useful/base2.html" %}
{% load i18n %}

{% comment %} {# ---------------------------------------------------------------------
📄 Fichier : awarded_projects.html
📂 Emplacement : projects/templates/projects/awarded_projects.html

🎯 Cette page est affichée dans l’espace entrepreneur (contractor dashboard).
Elle permet à l’entrepreneur connecté de visualiser tous les projets qui lui ont été attribués.

Chaque ligne du tableau affiche :
 - Le titre du projet
 - Le client qui a attribué le projet
 - Le budget et la date limite
 - Le statut (en cours, terminé, annulé…)
 - Un bouton "View" pour consulter les détails complets du projet

Cette page est alimentée par la vue `awarded_projects_view()` dans views.py.
Elle utilise la base2.html pour rester cohérente avec le layout minimal.
--------------------------------------------------------------------- #} {% endcomment %}

{% block title %}{% trans "My Awarded Projects" %}{% endblock %}

{% block content %}
<!-- 🌐 Conteneur principal centré -->
<div class="max-w-6xl mx-auto bg-white p-8 shadow-md rounded-md">

    <!-- 🧭 Titre de la section -->
    <h2 class="text-2xl font-bold text-center mb-6">
        {% trans "Projects Awarded to You" %}
    </h2>

    <!-- 🗃️ Cas où aucun projet n’a été attribué -->
    {% if awarded_projects|length == 0 %}
        <p class="text-center text-gray-500">
            {% trans "You haven't been awarded any projects yet." %}
        </p>

    <!-- ✅ Cas normal : projets affichés sous forme de tableau -->
    {% else %}
        <table class="w-full table-auto border-collapse">
            <thead class="bg-gray-100 text-left text-sm uppercase tracking-wide">
                <tr>
                    <th class="px-4 py-3">{% trans "Title" %}</th>
                    <th class="px-4 py-3">{% trans "Client" %}</th>
                    <th class="px-4 py-3">{% trans "Budget" %}</th>
                    <th class="px-4 py-3">{% trans "Deadline" %}</th>
                    <th class="px-4 py-3">{% trans "Status" %}</th>
                    <th class="px-4 py-3 text-center">{% trans "Actions" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for project in awarded_projects %}
                <tr class="border-b hover:bg-gray-50">
                    <td class="px-4 py-3 text-green-700 font-semibold">{{ project.title }}</td>
                    <td class="px-4 py-3">{{ project.client.username }}</td>
                    <td class="px-4 py-3">{{ project.budget }}</td>
                    <td class="px-4 py-3">{{ project.deadline }}</td>
                    <td class="px-4 py-3">{{ project.get_status_display }}</td>
                    <td class="px-4 py-3 text-center">
                        <!-- 🔗 Lien vers la page de détail du projet -->
                        <a href="{% url 'project_detail_html' project.id %}" class="text-sm text-teal-600 hover:underline">
                            {% trans "View" %}
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</div>
{% endblock %}
